#!/usr/bin/env bash

mkdir -p .

if ! command -v gdalinfo &> /dev/null
then
  echo "Error: gdalinfo could not be found. Please install GDAL."
  exit 1
fi
if ! command -v gdalbuildvrt &> /dev/null
then
  echo "Error: gdalbuildvrt could not be found. Please install GDAL."
  exit 1
fi
if ! command -v gdal_translate &> /dev/null
then
  echo "Error: gdal_translate could not be found. Please install GDAL."
  exit 1
fi
if ! command -v gdalwarp &> /dev/null
then
  echo "Error: gdalwarp could not be found. Please install GDAL."
  exit 1
fi
if ! command -v jq &> /dev/null
then
  echo "Error: jq could not be found. Please install jq: https://jqlang.github.io/jq/."
  exit 1
fi

if ! [ -f c21d3a8cff2ff76f.jpg ]; then
  echo "Image file does not exist: c21d3a8cff2ff76f.jpg"
  echo "This script expects a full-size source images for each georeferenced map it processes. See the README for more information."
  exit 1
fi

required_width_c21d3a8cff2ff76f_c969e4bba21381cf=5207
required_height_c21d3a8cff2ff76f_c969e4bba21381cf=7446

width_c21d3a8cff2ff76f_c969e4bba21381cf=( $(gdalinfo -json c21d3a8cff2ff76f.jpg | jq '.size[0]') )
height_c21d3a8cff2ff76f_c969e4bba21381cf=( $(gdalinfo -json  c21d3a8cff2ff76f.jpg | jq '.size[1]') )

if [ "$width_c21d3a8cff2ff76f_c969e4bba21381cf" -eq "$required_width_c21d3a8cff2ff76f_c969e4bba21381cf" ] &&
   [ "$height_c21d3a8cff2ff76f_c969e4bba21381cf" -eq "$required_height_c21d3a8cff2ff76f_c969e4bba21381cf" ]; then
    echo "Found image with correct size: c21d3a8cff2ff76f.jpg"
else
    echo "Error: found image with incorrect size"
    echo "  Image: c21d3a8cff2ff76f.jpg"
    echo "  Expected: $required_width_c21d3a8cff2ff76f_c969e4bba21381cf x $required_height_c21d3a8cff2ff76f_c969e4bba21381cf"
    echo "  Found: $width_c21d3a8cff2ff76f_c969e4bba21381cf x $height_c21d3a8cff2ff76f_c969e4bba21381cf"
    exit 1
fi
echo "Transformation type "helmert" is not supported. Using default polynomial transformation while warping. Note that the mask is still processed with transformation type "helmert". This can be undone using "-t polynomial"."

gdal_translate -of vrt \
  -a_srs 'EPSG:3857' \
  -gcp 3103 3990 2458826.325842762 14507748.138380978 \
-gcp 1529 2742 1226049.9336594397 15367511.832902241 \
-gcp 3153 2208 2537097.842918102 15865881.256943963 \
-gcp 2501 2918 2030778.9675292647 15297801.263054224 \
-gcp 2499 2700 2015491.561823527 15472077.68741122 \
-gcp 1835 4448 1639421.3827091625 14184878.130992604 \
-gcp 2335 2650 1894415.3090615529 15510601.949348161 \
-gcp 2861 4050 2296168.3297214815 14475338.83843473 \
-gcp 1829 4082 1577048.7675588839 14424584.651606975 \
-gcp 2921 4638 2323074.1635943744 14076031.802632928 \
-gcp 1465 3974 1352018.156287325 14478396.3193944 \
-gcp 3761 3514 2951692.2842951533 14826949.168650052 \
-gcp 2779 3834 2246025.639180321 14630047.383615728 \
-gcp 2873 3136 2309009.750438604 15141869.725384291 \
-gcp 1703 2696 1358133.118591884 15438445.3952168 \
-gcp 4219 3382 3294741.667232067 14880149.340383418 \
-gcp 2551 4184 2090094.101471604 14383614.40450443 \
-gcp 2031 3826 1720138.8845504788 14616594.466795992 \
-gcp 1459 3784 1325112.322303113 14611702.497026952 \
-gcp 2633 2364 2118834.4241137877 15761315.40234008 \
-gcp 2449 4588 2028332.9825406496 14105383.62176781 \
-gcp 1997 2772 1617407.5184795419 15411539.561020423 \
-gcp 2249 2572 1806359.8524770297 15575420.54993615 \
-gcp 1343 3364 1164288.8148398045 14866084.927225385 \
-gcp 1935 3888 1643701.8562444302 14575624.219556121 \
-gcp 3231 3998 2540155.324014722 14506525.145822894 \
-gcp 1973 3722 1664492.727924083 14691197.006504819 \
-gcp 1473 3362 1262128.2110448303 14907055.174484989 \
-gcp 2713 2918 2191602.4749925733 15290463.30810115 \
-gcp 2789 2220 2227069.2561586397 15887283.625309976 \
-gcp 1571 3180 1317774.367671226 15051368.28377519 \
-gcp 3169 4746 2508563.6936576637 13998847.562423445 \
-gcp 4313 3298 3383408.620035914 14933349.512211341 \
-gcp 1865 2894 1500611.7392528353 15289240.315563496 \
-gcp 1691 4366 1529352.0618950191 14229517.355818108 \
-gcp 1895 2708 1529963.558114343 15462905.243896054 \
-gcp 2995 3690 2376274.335343474 14737670.719484206 \
-gcp 1651 2690 1314716.8864632866 15439056.890917724 \
-gcp 2077 5320 1821035.761852124 13639423.49703329 \
-gcp 2205 3474 1828373.7165953307 14867919.416034803 \
-gcp 2121 5392 1844884.114739716 13595395.768957699 \
-gcp 3285 4774 2564003.6767909946 13984918.865075381 \
  c21d3a8cff2ff76f.jpg \
  c21d3a8cff2ff76f_c969e4bba21381cf.vrt

echo '{"type":"Polygon","coordinates":[[[9.618257916419761,75.99983314421607],[9.945059961577217,76.00218185974403],[10.271862006734672,76.00453018911298],[10.59866405189213,76.00687813238244],[10.925466097049583,76.00922568961195],[11.252268142207038,76.01157286086104],[11.579070187364495,76.01391964618924],[11.905872232521947,76.01626604565605],[12.232674277679404,76.01861205932101],[12.559476322836858,76.0209576872436],[12.886278367994315,76.02330292948332],[13.213080413151769,76.02564778609964],[13.539882458309227,76.02799225715208],[13.866684503466681,76.03033634270007],[14.193486548624138,76.03268004280311],[14.520288593781592,76.03502335752063],[14.847090638939044,76.0373662869121],[15.1738926840965,76.03970883103698],[15.500694729253956,76.04205098995467],[15.827496774411413,76.04439276372463],[16.15429881956887,76.04673415240626],[16.481100864726322,76.04907515605899],[16.807902909883776,76.05141577474222],[17.134704955041236,76.05375600851538],[17.461507000198687,76.05609585743782],[17.788309045356144,76.05843532156898],[18.1151110905136,76.06077440096817],[18.441913135671054,76.06311309569483],[18.76871518082851,76.06545140580828],[19.095517225985965,76.06778933136789],[19.42231927114342,76.07012687243304],[19.749121316300876,76.07246402906301],[20.07592336145833,76.07480080131721],[20.402725406615787,76.07713718925493],[20.729527451773237,76.07947319293548],[21.056329496930694,76.0818088124182],[21.38313154208815,76.08414404776241],[21.709933587245605,76.08647889902736],[22.03673563240306,76.08881336627239],[22.36353767756051,76.09114744955676],[22.690339722717972,76.09348114893974],[23.017141767875422,76.09581446448065],[23.343943813032883,76.09814739623872],[23.670745858190337,76.10047994427322],[23.99754790334779,76.10281210864338],[24.324349948505247,76.10514388940845],[24.651151993662697,76.10747528662769],[24.977954038820158,76.10980630036029],[25.304756083977612,76.1121369306655],[25.631558129135065,76.11446717760253],[25.958360174292526,76.11679704123058],[26.28516221944998,76.11912652160885],[26.611964264607433,76.12145561879652],[26.938766309764887,76.12378433285281],[27.265568354922348,76.12611266383685],[27.5923704000798,76.12844061180786],[27.919172445237255,76.13076817682497],[28.24597449039471,76.13309535894736],[28.572776535552165,76.13542215823416],[28.89957858070962,76.13774857474452],[29.226380625867076,76.14007460853757],[29.553182671024533,76.14240025967246],[29.87998471618199,76.14472552820827],[30.206786761339444,76.14705041420416],[30.533588806496894,76.1493749177192],[30.525923727251755,76.22280632086203],[30.518258648006622,76.29585590836841],[30.51059356876148,76.36852554740852],[30.502928489516346,76.44081709789221],[30.495263410271207,76.51273241246642],[30.487598331026067,76.5842733365134],[30.479933251780928,76.65544170814928],[30.472268172535795,76.7262393582234],[30.464603093290652,76.79666811031818],[30.45693801404552,76.86672978074955],[30.449272934800373,76.93642617856801],[30.44160785555524,77.00575910556003],[30.433942776310104,77.07473035625036],[30.426277697064965,77.14334171790439],[30.418612617819825,77.21159497053152],[30.410947538574693,77.27949188688865],[30.40328245932955,77.34703423248442],[30.395617380084417,77.41422376558374],[30.387952300839277,77.48106223721298],[30.380287221594138,77.54755139116557],[30.372622142348998,77.61369296400792],[30.364957063103866,77.67948868508604],[30.357291983858723,77.7449402765324],[30.34962690461359,77.81004945327331],[30.341961825368443,77.8748179230367],[30.33429674612331,77.93924738636036],[30.326631666878175,78.00333953660049],[30.318966587633035,78.06709605994078],[30.311301508387896,78.1305186354017],[30.303636429142763,78.19360893485042],[30.29597134989762,78.2563686230108],[30.288306270652487,78.31879935747408],[30.280641191407348,78.38090278870959],[30.27297611216221,78.44268056007608],[30.26531103291707,78.50413430783324],[30.257645953671936,78.5652656611536],[30.249980874426793,78.62607624213483],[30.24231579518166,78.68656766581209],[30.234650715936514,78.74674154017113],[30.22698563669138,78.80659946616129],[30.219320557446245,78.86614303770901],[30.211655478201106,78.92537384173161],[30.203990398955966,78.98429345815124],[30.196325319710834,79.04290345990933],[30.18866024046569,79.10120541298105],[30.180995161220558,79.15920087639019],[30.17333008197542,79.21689140222435],[30.16566500273028,79.2742785356502],[30.15799992348514,79.33136381492913],[30.150334844240003,79.38814877143315],[30.142669764994864,79.44463492966082],[30.13500468574973,79.50082380725377],[30.127339606504584,79.55671691501303],[30.119674527259452,79.61231575691595],[30.112009448014316,79.66762183013302],[30.104344368769176,79.72263662504514],[30.096679289524037,79.77736162526092],[30.089014210278904,79.83179830763432],[30.08134913103376,79.88594814228227],[30.07368405178863,79.93981259260275],[30.06601897254349,79.9933931152928],[30.05835389329835,80.0466911603669],[30.050688814053213,80.09970817117532],[30.043023734808074,80.15244558442284],[30.065777699602542,80.15260568239302],[30.088531664397014,80.15276577778604],[30.11128562919148,80.15292587060198],[30.134039593985953,80.15308596084085],[30.15679355878042,80.15324604850272],[30.179547523574893,80.15340613358762],[30.20230148836937,80.15356621609557],[30.22505545316384,80.15372629602663],[30.2478094179583,80.15388637338083],[30.27056338275278,80.15404644815823],[30.29331734754724,80.15420652035884],[30.31607131234172,80.15436658998273],[30.338825277136188,80.15452665702992],[30.36157924193066,80.15468672150044],[30.384333206725135,80.15484678339436],[30.4070871715196,80.15500684271171],[30.429841136314067,80.15516689945254],[30.452595101108543,80.15532695361685],[30.475349065903007,80.15548700520473],[30.49810303069748,80.15564705421619],[30.520856995491947,80.15580710065127],[30.543610960286422,80.15596714451003],[30.566364925080894,80.15612718579249],[30.589118889875362,80.1562872244987],[30.611872854669834,80.15644726062871],[30.634626819464298,80.15660729418254],[30.657380784258773,80.15676732516023],[30.68013474905324,80.15692735356184],[30.702888713847713,80.15708737938739],[30.72564267864218,80.15724740263695],[30.748396643436653,80.15740742331053],[30.77115060823112,80.15756744140818],[30.7939045730256,80.15772745692995],[30.81665853782006,80.15788746987586],[30.839412502614532,80.15804748024595],[30.862166467409008,80.15820748804029],[30.884920432203472,80.1583674932589],[30.907674396997947,80.15852749590181],[30.93042836179242,80.15868749596908],[30.953182326586887,80.15884749346074],[30.97593629138136,80.15900748837683],[30.998690256175827,80.15916748071741],[31.0214442209703,80.15932747048248],[31.044198185764767,80.15948745767211],[31.06695215055924,80.15964744228634],[31.089706115353707,80.15980742432521],[31.11246008014818,80.15996740378874],[31.135214044942654,80.16012738067698],[31.157968009737118,80.16028735498999],[31.180721974531586,80.16044732672779],[31.20347593932606,80.16060729589042],[31.226229904120526,80.16076726247793],[31.248983868914998,80.16092722649034],[31.271737833709473,80.16108718792772],[31.29449179850394,80.16124714679009],[31.317245763298413,80.1614071030775],[31.33999972809288,80.16156705678998],[31.362753692887352,80.16172700792758],[31.385507657681817,80.16188695649032],[31.408261622476292,80.16204690247828],[31.43101558727076,80.16220684589146],[31.453769552065232,80.16236678672992],[31.476523516859707,80.16252672499371],[31.499277481654172,80.16268666068284],[31.497578497043328,80.16900093115048],[31.49587951243248,80.17531118850798],[31.49418052782164,80.18161743522943],[31.49248154321079,80.18791967378755],[31.490782558599953,80.19421790665368],[31.489083573989106,80.20051213629773],[31.48738458937826,80.20680236518834],[31.485685604767415,80.21308859579268],[31.483986620156575,80.2193708305766],[31.482287635545724,80.2256490720045],[31.480588650934877,80.23192332253949],[31.478889666324033,80.23819358464328],[31.477190681713193,80.24445986077617],[31.475491697102342,80.25072215339716],[31.473792712491502,80.2569804649638],[31.47209372788065,80.26323479793228],[31.470394743269818,80.2694851547575],[31.468695758658967,80.27573153789287],[31.46699677404812,80.28197394979051],[31.465297789437276,80.28821239290116],[31.463598804826436,80.29444686967415],[31.46189982021559,80.30067738255747],[31.460200835604738,80.30690393399775],[31.458501850993898,80.31312652644021],[31.456802866383054,80.31934516232879],[31.455103881772207,80.32555984410595],[31.453404897161356,80.33177057421285],[31.451705912550516,80.3379773550893],[31.450006927939672,80.34418018917367],[31.44830794332883,80.35037907890305],[31.44660895871798,80.35657402671309],[31.444909974107134,80.36276503503812],[31.44321098949629,80.36895210631113],[31.44151200488545,80.37513524296367],[31.4398130202746,80.38131444742596],[31.43811403566376,80.3874897221269],[31.436415051052915,80.393661069494],[31.434716066442068,80.39982849195339],[31.43301708183122,80.40599199192982],[31.431318097220377,80.41215157184676],[31.429619112609537,80.41830723412626],[31.427920127998693,80.424458981189],[31.426221143387846,80.43060681545437],[31.424522158776995,80.43675073934028],[31.422823174166155,80.44289075526342],[31.42112418955531,80.44902686563904],[31.419425204944464,80.45515907288105],[31.417726220333613,80.46128737940201],[31.416027235722773,80.4674117876131],[31.41432825111193,80.47353229992419],[31.41262926650108,80.47964891874373],[31.410930281890234,80.48576164647892],[31.40923129727939,80.49187048553547],[31.407532312668547,80.49797543831785],[31.405833328057707,80.50407650722913],[31.40413434344686,80.51017369467101],[31.402435358836016,80.51626700304385],[31.400736374225172,80.52235643474671],[31.399037389614325,80.52844199217722],[31.397338405003477,80.5345236777317],[31.395639420392634,80.54060149380513],[31.393940435781793,80.54667544279113],[31.392241451170943,80.55274552708194],[31.390542466560095,80.55881174906848],[31.368217842060915,80.55854366560239],[31.345893217561738,80.55827557459305],[31.323568593062557,80.55800747604029],[31.301243968563373,80.55773936994389],[31.27891934406419,80.55747125630363],[31.25659471956501,80.55720313511932],[31.23427009506583,80.55693500639076],[31.211945470566643,80.55666687011772],[31.189620846067466,80.55639872630002],[31.167296221568286,80.55613057493743],[31.14497159706911,80.55586241602975],[31.122646972569928,80.55559424957679],[31.100322348070737,80.55532607557832],[31.07799772357156,80.55505789403415],[31.05567309907238,80.55478970494407],[31.033348474573202,80.55452150830787],[31.011023850074018,80.55425330412535],[30.98869922557483,80.55398509239629],[30.966374601075653,80.55371687312049],[30.944049976576473,80.55344864629777],[30.92172535207729,80.55318041192788],[30.899400727578108,80.55291217001064],[30.87707610307893,80.55264392054582],[30.85475147857975,80.55237566353325],[30.832426854080566,80.55210739897268],[30.810102229581382,80.55183912686395],[30.7877776050822,80.55157084720682],[30.765452980583024,80.5513025600011],[30.743128356083844,80.55103426524657],[30.720803731584652,80.55076596294305],[30.698479107085475,80.5504976530903],[30.676154482586295,80.55022933568813],[30.653829858087118,80.54996101073633],[30.631505233587937,80.54969267823468],[30.609180609088753,80.54942433818302],[30.586855984589572,80.54915599058108],[30.56453136009039,80.5488876354287],[30.54220673559121,80.54861927272567],[30.519882111092024,80.54835090247175],[30.497557486592846,80.54808252466677],[30.475232862093666,80.5478141393105],[30.45290823759448,80.54754574640275],[30.430583613095298,80.54727734594331],[30.408258988596117,80.54700893793196],[30.38593436409694,80.54674052236851],[30.36360973959776,80.54647209925274],[30.341285115098575,80.54620366858445],[30.31896049059939,80.54593523036344],[30.296635866100218,80.54566678458949],[30.274311241601033,80.5453983312624],[30.251986617101853,80.54512987038196],[30.22966199260267,80.54486140194797],[30.207337368103488,80.54459292596022],[30.18501274360431,80.54432444241849],[30.162688119105123,80.54405595132262],[30.140363494605946,80.54378745267233],[30.118038870106762,80.54351894646747],[30.09571424560758,80.54325043270782],[30.073389621108404,80.54298191139317],[30.051064996609217,80.54271338252332],[30.028740372110033,80.54244484609804],[30.006415747610856,80.54217630211716],[29.984091123111675,80.54190775058042],[29.96176649861249,80.54163919148768],[29.960837122167842,80.5458622007516],[29.9599077457232,80.55008334164408],[29.958978369278555,80.55430261496886],[29.958048992833906,80.5585200215293],[29.957119616389253,80.56273556212851],[29.95619023994461,80.56694923756926],[29.955260863499966,80.57116104865402],[29.954331487055317,80.57537099618489],[29.95340211061067,80.57957908096373],[29.952472734166022,80.58378530379206],[29.951543357721377,80.58798966547104],[29.95061398127672,80.5921921668016],[29.949684604832076,80.59639280858427],[29.948755228387434,80.60059159161932],[29.94782585194279,80.60478851670669],[29.94689647549814,80.60898358464603],[29.94596709905349,80.6131767962366],[29.945037722608845,80.61736815227745],[29.944108346164192,80.62155765356722],[29.943178969719543,80.62574530090433],[29.942249593274898,80.6299310950868],[29.941320216830256,80.6341150369124],[29.940390840385607,80.63829712717856],[29.93946146394096,80.64247736668237],[29.938532087496313,80.64665575622064],[29.937602711051667,80.65083229658988],[29.93667333460701,80.65500698858625],[29.935743958162366,80.65917983300562],[29.934814581717717,80.66335083064354],[29.933885205273075,80.66751998229526],[29.93295582882843,80.67168728875569],[29.93202645238378,80.67585275081944],[29.931097075939135,80.68001636928082],[29.930167699494483,80.68417814493382],[29.929238323049834,80.6883380785721],[29.928308946605185,80.69249617098906],[29.92737957016054,80.69665242297769],[29.926450193715898,80.70080683533077],[29.925520817271252,80.70495940884072],[29.924591440826603,80.70911014429964],[29.923662064381958,80.71325904249935],[29.9227326879373,80.7174061042313],[29.921803311492656,80.72155133028673],[29.920873935048007,80.72569472145646],[29.919944558603362,80.72983627853107],[29.91901518215872,80.73397600230078],[29.91808580571407,80.73811389355552],[29.917156429269426,80.74224995308494],[29.916227052824773,80.74638418167831],[29.915297676380124,80.75051658012464],[29.914368299935475,80.75464714921264],[29.91343892349083,80.75877588973066],[29.912509547046188,80.76290280246677],[29.911580170601543,80.76702788820873],[29.910650794156894,80.77115114774396],[29.90972141771224,80.77527258185961],[29.908792041267592,80.7793921913425],[29.907862664822947,80.78350997697912],[29.906933288378298,80.7876259395557],[29.906003911933652,80.79174007985812],[29.90507453548901,80.79585239867194],[29.90414515904436,80.79996289678245],[29.903215782599716,80.80407157497457],[29.902286406155067,80.80817843403301],[29.575445099320202,80.80682214922678],[29.248603792485333,80.80546566601664],[28.92176248565046,80.80410898437435],[28.594921178815596,80.80275210427163],[28.268079871980724,80.80139502568022],[27.94123856514586,80.80003774857184],[27.614397258310987,80.79868027291823],[27.287555951476122,80.79732259869107],[26.960714644641254,80.7959647258621],[26.633873337806385,80.79460665440303],[26.307032030971524,80.79324838428556],[25.980190724136655,80.79188991548139],[25.65334941730179,80.79053124796225],[25.326508110466918,80.7891723816998],[24.999666803632053,80.78781331666576],[24.67282549679718,80.78645405283179],[24.345984189962316,80.7850945901696],[24.019142883127447,80.78373492865087],[23.69230157629258,80.78237506824726],[23.365460269457714,80.78101500893045],[23.03861896262284,80.77965475067214],[22.711777655787976,80.77829429344395],[22.384936348953104,80.77693363721757],[22.05809504211824,80.77557278196466],[21.731253735283367,80.77421172765686],[21.404412428448502,80.77285047426585],[21.077571121613637,80.77148902176324],[20.75072981477877,80.77012737012072],[20.423888507943904,80.7687655193099],[20.09704720110903,80.76740346930241],[19.77020589427417,80.76604122006991],[19.4433645874393,80.76467877158402],[19.116523280604433,80.76331612381634],[18.789681973769564,80.76195327673854],[18.462840666934696,80.76059023032221],[18.135999360099827,80.75922698453896],[17.80915805326496,80.75786353936041],[17.482316746430094,80.75649989475818],[17.15547543959522,80.75513605070387],[16.828634132760357,80.75377200716905],[16.50179282592549,80.75240776412535],[16.174951519090623,80.75104332154434],[15.848110212255756,80.74967867939763],[15.521268905420886,80.74831383765681],[15.194427598586019,80.74694879629344],[14.867586291751149,80.7455835552791],[14.540744984916282,80.74421811458538],[14.213903678081412,80.74285247418383],[13.887062371246547,80.74148663404603],[13.560221064411682,80.74012059414353],[13.233379757576811,80.73875435444793],[12.906538450741945,80.73738791493074],[12.579697143907074,80.73602127556353],[12.252855837072207,80.73465443631785],[11.926014530237337,80.73328739716524],[11.59917322340247,80.73192015807723],[11.272331916567602,80.73055271902538],[10.945490609732735,80.72918507998122],[10.61864930289787,80.72781724091627],[10.291807996063001,80.72644920180205],[9.964966689228135,80.72508096261011],[9.638125382393264,80.72371252331193],[9.311284075558396,80.72234388387905],[8.984442768723529,80.72097504428298],[9.618257916419761,75.99983314421607]]]}' > c21d3a8cff2ff76f_c969e4bba21381cf.geojson

gdalwarp \
  -of COG -co COMPRESS=JPEG -co QUALITY=75 \
  -dstalpha -overwrite \
  -r cubic \
  -cutline c21d3a8cff2ff76f_c969e4bba21381cf.geojson -crop_to_cutline -cutline_srs "EPSG:4326" \
  -s_srs 'EPSG:3857' \
  -t_srs 'EPSG:3857' \
  -ts 3460 3730 \
  -order 1 \
  c21d3a8cff2ff76f_c969e4bba21381cf.vrt \
  c21d3a8cff2ff76f_c969e4bba21381cf-warped.tif

gdalbuildvrt c21d3a8cff2ff76f_c969e4bba21381cf.vrt \
  c21d3a8cff2ff76f_c969e4bba21381cf-warped.tif
