---
import Default from '@astrojs/starlight/components/PageFrame.astro'

import Header from './Header.astro'

import HomepageTitle from '../HomepageTitle.svelte'
import Footer from '../Footer.svelte'

const { type } = Astro.locals.starlightRoute.entry.data
---

{
  type === 'homepage' && (
    <div class="homepage">
      <HomepageTitle client:load />
      <header class="header">
        <Header {...Astro.props} />
      </header>
      <slot />
      <Footer />
    </div>
  )
}
{
  type === 'empty' && (
    <div class="empty-page">
      <slot />
    </div>
  )
}
{
  type === 'normal' && (
    <Default {...Astro.props}>
      <slot />
      <Fragment slot="header">
        <slot name="header" />
      </Fragment>

      <Fragment slot="sidebar">
        <slot name="sidebar" />
      </Fragment>
    </Default>
  )
}

<style>
  .header {
    z-index: var(--sl-z-index-navbar);
    position: sticky;
    top: 0;
    inset-inline-start: 0;
    inset-block-start: 0;
    width: 100%;
    height: var(--sl-nav-height);
    border-bottom: 1px solid var(--sl-color-hairline-shade);
    padding: var(--sl-nav-pad-y) var(--sl-nav-pad-x);
    padding-inline-end: var(--sl-nav-pad-x);
    background-color: var(--sl-color-bg-nav);
  }

  :global([data-has-sidebar]) .header {
    padding-inline-end: calc(
      var(--sl-nav-gap) + var(--sl-nav-pad-x) + var(--sl-menu-button-size)
    );
  }
</style>
