# @allmaps/openlayers

Plugin to show warped IIIF map on an OpenLayers map. The plugin works by loading [Georeference Annotations](https://iiif.io/api/extension/georef/).

Tested with OpenLayers 6 and OpenLayers 7.

spherical mercator projection

Usage:

```js
const warpedMapSource = new WarpedMapSource()
const warpedMapLayer = new WarpedMapLayer({
  source: warpedMapSource
})

const map = new ol.Map({
  target: 'map',
  layers: [
    new ol.layer.Tile({
      source: new ol.source.OSM()
    }),
    warpedMapLayer
  ],
  view: new ol.View({
    center: ol.proj.fromLonLat([-71.0599, 42.3589]),
    zoom: 14
  })
})

const annotationUrl =
  'https://annotations.allmaps.org/images/813b0579711371e2@2c1d7e89d8c309e8'

fetch(annotationUrl)
  .then((response) => response.json())
  .then((annotation) => {
    warpedMapSource.addGeoreferenceAnnotation(annotation)
  })
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

*   [WarpedMapLayer](#warpedmaplayer)
    *   [Parameters](#parameters)
    *   [setMapColorize](#setmapcolorize)
*   [WarpedMapSource](#warpedmapsource)
    *   [Parameters](#parameters-2)
    *   [addMap](#addmap)
    *   [removeMap](#removemap)
    *   [addGeoreferenceAnnotation](#addgeoreferenceannotation)
    *   [removeGeoreferenceAnnotation](#removegeoreferenceannotation)
    *   [clear](#clear)
    *   [getWorld](#getworld)
    *   [getMap](#getmap)
    *   [showMap](#showmap)
    *   [showMaps](#showmaps)
    *   [hideMap](#hidemap)
    *   [hideMaps](#hidemaps)
    *   [isVisible](#isvisible)
    *   [setResourceMask](#setresourcemask)
    *   [setTransformation](#settransformation)
    *   [getExtent](#getextent)
    *   [sendToBack](#sendtoback)
    *   [bringForward](#bringforward)
    *   [sendBackward](#sendbackward)
    *   [getZIndex](#getzindex)
    *   [setImageInfoCache](#setimageinfocache)

### WarpedMapLayer

**Extends Layer**

Class representing a OpenLayers WarpedMapLayer

#### Parameters

*   `options` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Options

#### setMapColorize

Sets the colorize color of a single map

##### Parameters

*   `mapId` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Map ID
*   `hexColor` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Hex color

### WarpedMapSource

**Extends Source**

Class representing a warped map source.

#### Parameters

*   `imageInfoCache` **Cache?** The y value. <https://developer.mozilla.org/en-US/docs/Web/API/Cache>

#### addMap

Create a warped map source

##### Parameters

*   `map` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### removeMap

Create a warped map source

##### Parameters

*   `map` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### addGeoreferenceAnnotation

Create a warped map source

##### Parameters

*   `annotation` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### removeGeoreferenceAnnotation

Create a warped map source

##### Parameters

*   `annotation` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### clear

Create a warped map source

##### Parameters

*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### getWorld

Returns WORLD

Returns **World** The World

#### getMap

Create a warped map source

##### Parameters

*   `mapId` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### showMap

Create a warped map source

##### Parameters

*   `mapId` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### showMaps

Create a warped map source

##### Parameters

*   `mapIds` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### hideMap

Create a warped map source

##### Parameters

*   `mapId` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### hideMaps

Create a warped map source

##### Parameters

*   `mapIds` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### isVisible

Create a warped map source

##### Parameters

*   `mapId` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### setResourceMask

Create a warped map source

##### Parameters

*   `mapId` &#x20;
*   `resourceMask` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### setTransformation

Create a warped map source

##### Parameters

*   `mapIds` &#x20;
*   `transformation` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### getExtent

Create a warped map source

##### Parameters

*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### sendToBack

Create a warped map source

##### Parameters

*   `mapIds` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### bringForward

Create a warped map source

##### Parameters

*   `mapIds` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### sendBackward

Create a warped map source

##### Parameters

*   `mapIds` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### getZIndex

Create a warped map source

##### Parameters

*   `mapId` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.

#### setImageInfoCache

Create a warped map source

##### Parameters

*   `cache` &#x20;
*   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The x value.
*   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** The y value.
