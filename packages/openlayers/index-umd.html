<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@allmaps/openlayers</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.15.1/css/ol.css"
      type="text/css"
    />
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.15.1/build/ol.js"></script>
    <script src="dist/allmaps-openlayers.umd.js"></script>
    <style>
      body {
        width: 100%;
        height: 100%;
        position: absolute;
        margin: 0;
        padding: 0;
      }

      #map {
        height: 100%;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      const warpedMapSource = new Allmaps.WarpedMapSource()
      const warpedMapLayer = new Allmaps.WarpedMapLayer({
        source: warpedMapSource
      })

      const map = new ol.Map({
        target: 'map',
        layers: [
          new ol.layer.Tile({
            source: new ol.source.OSM()
          }),
          warpedMapLayer
        ],
        view: new ol.View({
          center: ol.proj.fromLonLat([-71.0599, 42.3589]),
          zoom: 14
        })
      })

      const georef = {
        gcps: [
          {
            world: [-71.0643878699, 42.3593524428],
            image: [835.25, 1667.5]
          },
          {
            world: [-71.0650771976, 42.3588351454],
            image: [768.75, 1725]
          },
          {
            world: [-71.0539218904, 42.3643190737],
            image: [1782.25, 1091.25]
          },
          {
            world: [-71.0527578117, 42.3662473526],
            image: [1884.125, 873.25]
          },
          {
            world: [-71.0580404223, 42.3672679489],
            image: [1403.375, 750.25]
          },
          {
            world: [-71.0566295803, 42.3682191695],
            image: [1534.625, 635.5]
          },
          {
            world: [-71.0573966921, 42.3677514879],
            image: [1445.375, 706]
          },
          {
            world: [-71.0635577262, 42.3594277577],
            image: [918.75, 1656.5]
          }
        ],
        image: {
          uri: 'https://iiif.digitalcommonwealth.org/iiif/2/commonwealth:9s161b03w',
          type: 'ImageService2',
          width: 2589,
          height: 4088
        },
        version: 1,
        pixelMask: [
          [0, 0],
          [2589, 0],
          [2589, 4088],
          [0, 4088]
        ]
      }

      const georef2 = {"image":{"uri":"https://iiif.digitalcommonwealth.org/iiif/2/commonwealth:m900r5419","type":"ImageService2","width":7624,"height":5136},"pixelMask":[[0,0],[7624,0],[7624,5136],[0,5136]],"gcps":[{"image":[2047,505.0004272461],"world":[-71.0894796224,42.3508453579]},{"image":[868.75,1363.0004272461],"world":[-71.1065760225,42.3500028991]},{"image":[1480.25,2709.7504272461],"world":[-71.1092957824,42.3369939038]},{"image":[1753.75,3462.5004272461],"world":[-71.1112698883,42.3300541435]},{"image":[2297.25,3857.2504272462],"world":[-71.1082443565,42.3244660886]},{"image":[2376.5,783.2504272462],"world":[-71.0877415508,42.3472910965]},{"image":[2936.5,1098.2504272462],"world":[-71.0840722888,42.3421962389]},{"image":[3591,1393.0004272462],"world":[-71.0792657702,42.3365378858]},{"image":[4417,1570.0004272462],"world":[-71.0719594328,42.3313033568]},{"image":[2841,3388.7504272462],"world":[-71.0997149317,42.3254219231]},{"image":[3513.75,4163.50042724623],"world":[-71.0977032749,42.3164162756]},{"image":[3569.75,3534.5004272462],"world":[-71.093148884,42.3208072103]},{"image":[5052,4529.25042724628],"world":[-71.0845497219,42.3060902235]},{"image":[4297,4511.00042724639],"world":[-71.0921671955,42.3099304592]},{"image":[4930.5,3464.5004272464],"world":[-71.0788366167,42.3146034878]},{"image":[5788.25,3378.0004272464],"world":[-71.0701194374,42.311301065]},{"image":[5796.25,2476.0004272464],"world":[-71.0639396278,42.318010851]},{"image":[4894,1686.0004272464],"world":[-71.0679092972,42.328029572]},{"image":[5217.75,2117.0004272464],"world":[-71.0675203768,42.3232861484]},{"image":[4187,3467.5004272464],"world":[-71.0862341491,42.3182409108]},{"image":[5007,2509.8616333012],"world":[-71.072206196,42.3213506019]},{"image":[2164,2422.1116333012],"world":[-71.1002138225,42.3358776453]},{"image":[1280,1492.7228393559],"world":[-71.1033305494,42.3471305255]},{"image":[2564,2028.4728393559],"world":[-71.0936692325,42.3369601981]},{"image":[1815.75,1021.7228393559],"world":[-71.0949540106,42.348034475]},{"image":[3936.25,2284.4728393553],"world":[-71.0815054146,42.3284797027]},{"image":[4343,1924.9728393553],"world":[-71.0750251976,42.3290388914]},{"image":[3155,1749.4728393553],"world":[-71.0859203306,42.3362959967]},{"image":[2416.75,1191.2228393553],"world":[-71.08989,42.343936863]},{"image":[3036,2705.2228393553],"world":[-71.093213257,42.3296516138]},{"image":[1558,1814.7228393553],"world":[-71.1026224462,42.34330842]},{"image":[3897.25,2762.6395416258],"world":[-71.0848098961,42.3250867877]}]}

      warpedMapSource.addMap(georef)
      warpedMapSource.addMap(georef2)
    </script>
  </body>
</html>
